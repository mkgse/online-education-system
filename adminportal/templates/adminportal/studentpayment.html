{% extends 'adminportal/base1.html' %}
{% load static %}



{% block content %}

<div class="container-fluid shadow" style="width: 100vw; padding: 20px; margin:100px 0px 60px 0px;; border-radius:10px;">
  <h3 class="text-center alert alert-success">Student Payment Details</h3>
    <!-- ðŸ”½ Status Filter -->
  <form method="get" class="mb-3 d-flex justify-content-end">
    <select name="status" class="form-select w-auto me-2" onchange="this.form.submit()">
      <option value="">All</option>
      <option value="success" {% if status == "success" %}selected{% endif %}>Success</option>
      <option value="failed" {% if status == "failed" %}selected{% endif %}>Failed</option>
    </select>
    <noscript><input type="submit" value="Filter"></noscript>
  </form>
<table class="table table-striped table-bordered table-hover align-middle">
    <thead>
      <tr>
        <th scope="col">S.N.</th>
        <th scope="col">User Name</th>
        <th scope="col">Payment Date</th>
        <th scope="col">Payment Id</th>
        <th scope="col">Status</th>
        <th scope="col">Amount</th>
      </tr>
    </thead>
    {% if page_obj %}
    {% for fm in page_obj %}
    <tbody>
      <tr>
        <td>{{forloop.counter}}</td>
        <td>{{fm.user}}</td>
        <td>{{fm.payment_date}}</td>
        <td>{{fm.paymentid}}</td>
        <td>{{fm.amount_status}}</td>
        <td>{{fm.display_amount|floatformat:0}}</td>
        
      </tr>
    </tbody>
    {% endfor %}
    {% else %}

    <tbody>
      <tr>
        <td>No Record Found</td>
      </tr>
    </tbody>
    {% endif %}
    
  </table>
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}&status={{ status }}">Previous</a>
        </li>
      {% endif %}

      {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
          <li class="page-item active"><span class="page-link">{{ num }}</span></li>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <li class="page-item"><a class="page-link" href="?page={{ num }}&status={{ status }}">{{ num }}</a></li>
        {% endif %}
      {% endfor %2}
      {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}&status={{ status }}">Next</a>
        </li>
      {% endif %}
    </ul>
  </nav>




<div class="col-sm-4 offset-4">
    {% if messages %}
     {% for message in messages %}
     <span {% if message.tags %} class="alert-{{message.tags}}" {% endif %}><script>alert('{{message}}')</script></span>
    {% endfor %}
    {% endif %} 
   
    
    </div>

  </div>      
{% endblock content %}